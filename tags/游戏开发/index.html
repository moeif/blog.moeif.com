<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>游戏开发 | Meowsay</title><meta name=keywords content><meta name=description content="ExampleSite description"><meta name=author content="猫猫"><link rel=canonical href=https://blog.moeif.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.moeif.com/images/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://blog.moeif.com/images/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://blog.moeif.com/images/favicon.png><link rel=apple-touch-icon href=https://blog.moeif.com/images/favicon.png><link rel=mask-icon href=https://blog.moeif.com/images/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.moeif.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="游戏开发"><meta property="og:description" content="ExampleSite description"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.moeif.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"><meta property="og:image" content="https://blog.moeif.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="猫猫小木屋"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.moeif.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="游戏开发"><meta name=twitter:description content="ExampleSite description"></head><body class=list id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.moeif.com/ accesskey=h title="Meowsay (Alt + H)"><img src=https://blog.moeif.com/images/favicon.png alt aria-label=logo height=24>Meowsay</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://blog.moeif.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.moeif.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.moeif.com/about/ title=About><span>About</span></a></li><li><a href=https://moeif.com title="Meowsay Games"><span>Meowsay Games</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://blog.moeif.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.moeif.com/tags/>Tags</a></div><h1>游戏开发</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>角色扮演游戏设计艺术笔记</h2></header><div class=entry-content><p>玩家需要感受到他们的交互效果，他们希望自己对游戏的经历起重要作用并通过他们交互对世界、故事或其他游戏元素产生某种程度上的辨认效果。
奖励 玩家在完成一次胜利，或特定的时候，给予一定的奖励，以此激励他们继续奋战。
保险性 确保玩家可以在游戏中通过某些途径获得物品，技巧等，以完成对于障碍的挑战。
确认 游戏规则不会确认，游戏的公平性保证
技巧 通过经历获得技巧。还需要明确地说明目标，让玩家知道为何而战。
铁杆（氪金）玩家需要 非常高级别的挑战 提供数小时扩展的游戏 某种程度的重玩结构 高度的细节和内存逻辑环境 使用字符、对象、符咒以及游戏设计的任何其他数字驱动等信息 普通玩家的需要 简单、简单、简单 短的学习曲线，游戏的界面和游戏的基本控制应该可以在短时间内掌握 非常快的升级速度以及频繁的奖励 以外观和感觉为中心的设计 清楚地提供游戏目标 短时间内应该能完成的游戏 破坏者的需要（特殊） 主要通过战斗解决游戏的目标 主要关注角色的战斗能力 探宝家式的玩家需要 频繁分布有价值的物品 具有找到便宜商品并且可以进行精明买卖的灵活的游戏经济系统 具有可以更多了解物品的组织属性和机制清单的系统 在模拟的经济系统中，有一些玩家会因为宝物的价值，或者艺术美而收集他们（收集癖好）。有一些物品不但非常有价值，而且可以帮助完成完成一些关键任务。玩家收集的许多材料的唯一的目标就是必须用它来做某些事情
旅行者的需要 可以探索的足够大的世界 很多交互细节 能够显示玩家到过和未到过的游戏地图 Q： 想办法处理冗长的背包物品列表，来找到需要的物品
随机性 随机性=冒险=危险=感情投入 游戏中的任何一部，都要让玩家明白有失败的可能性，任何一步都不能是100%确定的 例如攻击力，可以不用绝对攻击力，而使用范围。例如，攻击17~67
关于技能与角色特点（职业） 在网络游戏Ultima中，如果玩家一段时间没有使用某种技能的话，那么玩家的这种技能水平就会下降。使用这种方式，可以让玩家自己确定到底要保留哪些类型的技能。
还有一种方式，就是完全舍弃独立的技能系统，将所有的技能的载体放在物品（装备）上，例如一双靴子，有了这个，就拥有了垂直走路的能力。另一方面，因为这个能力的存在，所以这个靴子会占据较大的空间，或者让此物品很重，让玩家不能同时携带多于两个这类物品。
这种方案的有点是强制每个角色有不同的表现，并根据他们自己口袋装着的物品形成不同的角色。
经典RPG游戏中的重要因素 探险 让玩家处于一个令人难忘，错综复杂，但是具有内在致性的世界中。玩家在游戏中遇到的每个角色和每一件事情都应尽量真实，而还是为了迎合剧情发展。 故事 无论游戏中为玩家角色设计了什么大型剧情，我们一定要让玩家感受到游戏需要他们参与才能解决出现的那些问题。 战斗 令人兴奋、直觉、快节奏的战斗界面对游戏的成功是很重要的。 临时任务 拯救世界需要花费很多时间。要实现游戏的高度可重玩性，根据玩家角色的不同行为而提供不同的临时任务是一种好方法，这会让玩家们不断地重新开始。 搜寻财宝 玩家对于他们可以在盒子桶、板条箱，或者书箱里发现的东西非常好奇。任何看起来有可能包含报备的容器都会引起玩家的注意力，而正是我们游戏者决定他们过去会找到什么东西。我们可以为玩家提供武器、弹药、具有魔力的物品、珠宝，甚至是一件新衣服。不论提供什么，在玩家以后的游戏经历中，这些驼绒裤可以预约可以派上用场。要注意尽量避免创建无用的占是占据背包的物品。 资源管理 资源管理是RPG游戏的主要部分，通常会要求玩家管理一些琐碎的事务，比如保证角色具有足够吃的，保证足够的睡眠，保证武器处于战斗状态。由于某些物品的稀少或者难以获得，玩家还需要考虑使用情况，例如电池、子弹、血瓶等。RPG游戏通常也会让玩家自己去考虑如何花手头的钱，是去购买更好的装备，还是用来贿赂城堡卫兵。 解决问题 玩家在游戏过程中要面临多种类别的挑战，在战斗中随着遇到更厉害的怪物，玩家需要不断掌握新的策略。偶尔也会在黑暗的地下城和狂人住宅中遇到考验智力的难题和陷阱。 RPG游戏的持久力量在于超越了平凡的能力，可以将玩家带入兴奋和有趣的新设计，以家庭、城市、王国或者银河系的形式为玩家创造不同的机会。游戏中的每个人都有很重要的影响力。
游戏构思的可能选择 兴趣爱好 文化底蕴，探险 哲学、精神领域 历史事件 假定分析、推断 身边不断变化中的事情 公众会议、社会组织 自然规律 生命中出现的任何不寻常现象 军事训练准则 科技设备，中世纪武器，服装 玩家究竟是什么 一个玩家应当要做出选择 一个玩家应当要获得报酬 一个角色扮演游戏总是需要一些反对的力量去积极地对抗玩家。没有反对就没有斗争，而没有斗争你所拥有的就不是游戏了。 游戏规则 在一个RPG游戏中，你的任务就是去创建一套有着内在联系的规则，就像是棋子一样。你必须定义出玩家与他们的化身，与环境、目标，还有其他玩家及怪物相交互的所有方式。这当中有的规则是直接指出解决特定情况的方法，像是确定当当玩家试着踢到一扇门时将会发生什么情况。其他的规则都是普遍应用的一般性设计原则，它们可以帮助玩家了解游戏世界是怎样运行的。所有的这些想法必须平稳地结合在一起，从而创建出一个没有扣动、逻辑缜密的程序体，也就是人们所知道的规则体系。...</p></div><footer class=entry-footer><span title='2023-03-26 15:44:52 +0800 CST'>March 26, 2023</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 角色扮演游戏设计艺术笔记" href=https://blog.moeif.com/posts/rpg-game-design-note/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Unity 内存管理的专业提示</h2></header><div class=entry-content><p>优化是游戏开发中很重要的一部分，涉及的方面主要有 CPU，GPU，内存，网络等。
在这篇博客中，主要会写关于内存相关的优化，Unity 是如何管理内存的，以及怎样才能使游戏更高效地运行。
在深入到 Unity 之前，我们先来看一下内存是如何工作的。
操作系统会在物理内存的基础上，创建一个虚拟内存，用于程序运行。在这个抽象中，会有一些虚拟地址空间（VAS）
在内存优化上，主要考虑两部分，也就是栈（Stack）和堆（Heap）。在理解栈和堆之前，首先要理解在 Unity 中，数据的类型，可分为值类型，和引用类型。对于值类型的数值，会直接存储在栈上，并且是可以直接复制的。例如，int, float, bool, struct, Color Vector3 等。
而引用类型的数据，则是存储在堆上，但是，指向这个数据的指针，是存储在栈上的。
栈（Stack） 存储值类型 存储引用类型的指针 由 CPU 自动管理，无须程序员关心。在函数调用时，参数将自动申请内存放入栈中，当函数结束时，这些参数又会从栈取出，释放内存，这一切操作都是自动的。 栈比堆的速度快 栈的容量有限，如果超过上限，则会出现栈溢出。 栈的运行方式是 Last in first out。也就是后进先出，或者说先进后出。 堆（Heap） 可以存储引用类型和值类型的数据 由程序员手动管理 内存空间不一定是连续的 比栈速度慢 可以扩展空间大小 接下来，我们来理解什么是 “垃圾”，以及什么是 “垃圾回收”。
垃圾 存储在栈上的一个指向堆数据的指针结束时（释放时），堆上的数据没有用了，对于这样的对象，可以理解为 “垃圾”。
垃圾回收 为了解决垃圾内存的问题，.Net 有对应的垃圾回收系统。
在初始化一个新的进程时，语言运行时会为该进程保留一个连续的地址空间区域。这个保留的地址空间称为托管堆。托管堆维持指向堆中下一个对象的地址指针。
从托管堆中分配内存，比非托管堆中分配内存要快。
垃圾回收系统会创建一个包含从根可访问的所有对相的图。当一个对象不在这个图中，也就是无法从根节点访问时，垃圾回收系统会将这部分内存视为垃圾，并在合适的时机释放为其分配的内存。
Unity 的内存管理系统 Unity 的内存管理分为三部分。
托管内存 托管内存使用托管堆以及垃圾回收系统自动分配和释放内存，而提供这个功能的是 Mono 或 IL2CPP。在 Unity 中我们大部分时候使用的都是托管内存，所以 New 对象时，都不考虑释放，垃圾回收系统会帮我们处理掉。
C# 非托管内存 C＃非托管内存层使你可以在编写C＃代码的方便下访问本机内存层以微调存储器分配。
您可以在Unity Core API中使用Unity.CollectionsNamespace（包括NativeArray），以及Unity Collections软件包中的数据结构来访问C＃非托管的内存。如果您使用Unity的 Job System 或 Brust，则必须使用C＃非托管内存。...</p></div><footer class=entry-footer><span title='2022-11-01 10:04:23 +0800 CST'>November 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to Unity 内存管理的专业提示" href=https://blog.moeif.com/posts/unity-memory-management-with-pro-tips/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>异能觉醒，新游预约</h2></header><div class=entry-content><p>4508年，因核泄露污染水域从而造成人类大灭绝，并造成了全球生物变异，但少数人类适应了污染，造成了细胞全面进化，使生命层次进化觉醒异能。
自从污染事件已来，整个世界变得异常的诡异，一些【奇奇怪怪】的东西，开始出现，什么鸡坤，什么篮球，杀伤力不强，但是让人异常头晕。在这个少数人的世界，开始一段令人哇塞的旅程。收集各种各样的物品，打造各种奇怪的装备，战斗各种让人费解的敌人。还可以养宠物，升级宠物，带着宠物去打怪……
一旦你开始玩这个游戏，奇怪的事情，就开始发生了……
是的，我又开发新游戏了，已经新建好文件夹，不过还没有开始写下第一行逻辑代码。
开发者的话 大家好，我是练习时长，好多年的，游戏开发者，因为技术太差，找不到工作，赚不到钱，只能白天送外卖，晚上开发游戏。我平时什么也不喜欢干，就喜欢打代码，做游戏。这个游戏，是我做的众多辣鸡，噢不，好玩的游戏之一。游戏正在开发中，预计下个月可以做完上线（如果我平时少摸点鱼的话），嗯，不管怎么样，点一下预约，点一下关注，你就是我爱的人~
虽然游戏还没有做完，但依然可以加入QQ号瞎聊【异能觉醒 - 1群】：134032407
游戏假图 游戏预约 在 TapTap 上预约：https://www.taptap.com/app/242377
在 好游快曝 上预约：https://www.3839.com/a/147738.htm</p></div><footer class=entry-footer><span title='2022-10-17 09:09:29 +0800 CST'>October 17, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 异能觉醒，新游预约" href=https://blog.moeif.com/posts/new-game-to-reservation/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>通过作用域最小化来避免屎一样的代码</h2></header><div class=entry-content><p>面条式代码，是软件工程中反面模式的一种，也就是源代码的控制流程复杂，混乱难以理解，见到来说，就是屎一样的代码。
最小化变量的作用域，是避免产生面条式代码的一种有效方式。
作用域最小化是一种构建代码的方式，操作起来很容易
声明具有最小作用域的变量 用具有最小作用域的数据来分配变量 事实上，是代码的结构，定一了变量的可见性。
背景 一个程序是由一些单一或者组合的语句构成，例如赋值操作、条件判断、循环等。
通常来说，如果有两个代码块 A 和 B
如果 A 包含 B，那么 A 就是 B 的外部代码块 如果 B 被 A 所包含，那么 B 就是 A 的内部代码块 代码的缩进级别，是由嵌套级别数量决定的，直接的内部块会比其外部块多一个级别。
我们假设定义全局作用域，也就是没有外部块的代码，缩进级别为0，而全局变量，就是那些在全局范围内定义的变量。
变量可见规则 一个变量的可见性，由下面规则决定
从该变量的声明语句开始 结束于变量声明块的末尾 并且在开始与结束中间的嵌套块中也是可见的 反过来说，如果一个变量是不可见的，那么
在变量声明前 在变量声明块结束后 建议 R1. 尽量不要使用全局变量 R2. 声明单一用途的变量 R3. 在接近变量用途的地方声明变量 R4. 保持小的代码块 R5. 使用靠近其声明的变量 R6. 使用不超过2层的嵌套 R1. 尽量不要使用全局变量 全局变量会使代码变得难以阅读和理解，难以维护和测试。
全局变量的使用，增加了出现问题的概率，并且不容易被发现。
程序中可能错误地分配变量的语句越少越好。
总之，全局变量的使用往往代表着技术债务，必须尽快重构以避免后期的不可维护。
R2. 声明单一用途的变量 为单一的特定目的声明和使用变量，以便将其作用域限制作到最小。
一个变量的目的性越多，意味着可访问此变量的代码块越多。
而变量可见的语句数量越多，可能错误地赋值变量的语句就越多。
可能错误地赋值变量的语句越多，那么发现和修复潜在错误就越困难。
R3. 在接近变量用途的地方声明变量 尽可能地在靠近将使用这些变量的语句和代码块的地方声明变量。
与 R2 严格相关。...</p></div><footer class=entry-footer><span title='2022-10-04 14:09:29 +0800 CST'>October 4, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 通过作用域最小化来避免屎一样的代码" href=https://blog.moeif.com/posts/avoid-spaghetti-code-with-scope-minimization/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>噪声函数与地图生成</h2></header><div class=entry-content><p>在我学习声音信号处理的时候，我的大脑很自然地联想到了地图生成。这篇博客记录了关于信号处理的一些概念与地图生成相关的东西。这些知识点不是一些新的东西，但对我来说，是以前从未接触过的，所以我想记录一下，并且分享给大家。这篇博客会覆盖一些简单的主题，频率、振幅、噪声的种类、噪声的应用等。涉及到的数学部分，基本上只有正弦波形。
这里会从简单的概念开始，然后逐渐深入。
注意：下面涉及的代码，虽然是以 Python 来描述的（简单直观），但文章的目的是为了解释原理，使用任何语言都可以的。
1. 为什么随机性是有用的 我们在程序化的地图生成中要做的是生成一组输出，其中有一些东西是相同的，而有一些东西是不同的。例如，在我的世界这个游戏中，所有的地图都有很多相似性。生物群落，方块大小，生物群落的平均大小，洞穴的平均高度，不同石头所占的比例等等。但是，也有一些不同的地的：群落的位置，黄金的位置，洞穴的大小等等。作为游戏的设计者，需要决定哪些部分需要是相同的，哪些部分需要是不同的。
对于不同的部分，通常是使用随机数生成器。让我们来做一个极其简单的地图生成器：它将包含20个格子，其中某些格子将包含宝箱。结果如下 请注意这个地图有多少共同的地方：首先它都是由格子组成（每个点作为一个格子），每行有20个格子，然后有两种类型的块，一个是空白，一个是宝箱。
但有一点是不同的，哪一个格子是什么类型，也就是说宝箱可能出现在从0到19的任何一个格子。
我们可以使用随机数来选择将宝箱放在哪一个格子中。最简单的方式是选择从0到19的随机数。这意味着每一个格子都可能被选择。大部分的编程语言都包含随机数生成函数。在 Python 中，使用方式是 random.randint(0, 19)。完整代码如下
def gen() map = [0] * 20 pos = random.randint(0, 19) map[pos] = 1 return map for i in range(5): print_chart(i, gen()) 生成结果如下：
假设我们想让地图中的宝箱有更多的可能性出现在左边，这时就要使用非均匀随机数选择了。有很多方法可以完成这件事情，其中一种方式是首先选择一个随机数，然后将它向左移动，例如，使用函数 random(0,19)/2，下面是 Python 代码
def gen(): map = [0] * 20 pos = random.randint(0, 19) / 2 map[pos] = 1 return map for i in range(5): print_chart(i, gen()) 然后，如果我们想让宝箱更多地出现在左边，但是，右边也不能一个没有，应该怎么办呢？一个方式是使用平方数，也就是先选定一个随机数，然后计算它的平方，然后再用结果除以19(地图右边界索引)，得到的结果向下取整。下面是代码和效果
def gen(): map = [0] * 20 pos = random....</p></div><footer class=entry-footer><span title='2022-09-25 23:04:23 +0800 CST'>September 25, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 噪声函数与地图生成" href=https://blog.moeif.com/posts/noise-function-and-map-generation/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Unity 游戏启动前显示隐私协议</h2></header><div class=entry-content><p>使用 Unity 开发的游戏，在上架某些平台时，比如 TapTap，由于政策的原因，需要在收集用户信息，或使用某些权限时，先弹出隐私协议，用户同意之后，才能操作。但是如果直接在 Unity 里做这件事情，哪怕是用一个空场景来做，Unity 本身就会在隐私协议前收集一些信息，所以，我们需要使用原生代码，来操作这一块逻辑。这里只说 Android。
首先要做的就是在 Assets/Plugins/Android 新建一个 java 文件，用来作为启动 Activity，在这个 Activity 中，先展示隐私协议，当玩家点击同意后，再去调用 Unity 的 Activity。
package com.moeif.moeifgames; import android.app.Activity; import android.app.AlertDialog; import android.content.DialogInterface; import android.content.Intent; import android.content.SharedPreferences; import android.os.Bundle; import com.unity3d.player.UnityPlayerActivity; public class MoeNativeActivity extends Activity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); if (!isTaskRoot()) { Intent intent = getIntent(); String action = intent.getAction(); if (intent.hasCategory(Intent.CATEGORY_LAUNCHER) && action != null && action.equals(Intent.ACTION_MAIN)) { finish(); return; } } Boolean anInt = false; // 隐私协议相关 SharedPreferences base = getSharedPreferences("base",MODE_PRIVATE); anInt = base....</p></div><footer class=entry-footer><span title='2022-07-17 06:04:23 +0800 CST'>July 17, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to Unity 游戏启动前显示隐私协议" href=https://blog.moeif.com/posts/show-privacy-before-unity/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>一个独立游戏的开发总结</h2></header><div class=entry-content><p>从2021年4月开始，我作为一名独立开发者，开始了自己的瞎折腾之路。一年多没有做出什么赚钱的项目。不过现在，终于做出了一个对于我自己来说，算是成功的项目。
我现在上线的这款游戏是一个文字游戏，画风稀碎，也没有什么具体的游戏类型，一切都是野路子，只要觉某个玩法好玩，就会添加这个玩法。这个游戏就是《无量：钓海》，目前已经上线了 TapTap、好游快爆、AppStore、光环助手、4399 平台。在没有版号的情况下，国内也就这些平台可以上了。
《无量钓海》TapTap 链接: https://www.taptap.com/app/234065
游戏从构思，开发，到上线，经历了很多问题，也学到很多东西。这些经验，趟过的坑，开发上的积累，等等，都可以用于下一个项目。
这个项目参与的人可以说有三个。工程的开发，是我来做，游戏内容的构思，策划，是另一个小伙伴在做。第三个人，也是一个游戏玩法，帮我们做了一部分角色的图片。
这个游戏的起点，是在我一个游戏《游戏码农》的玩家群里，有一个玩家说他有一个很好的点子，建议我做一下。正好那个时候也在想新项目的方向，我考虑了一下，所性就问他是否愿意合作开发，然后游戏的广告收益进行分成。结果已经知道了，我们合作了。而这个玩家，是一个正在读高中的学生。在合作的过程中，一开始的沟通肯定不是那么顺畅的，因为对方也没做过游戏。但最终这个问题还是解决了，方法也很简单，就是把自己构思的东西，写明白，写详细，以文字的形式描述出来。至于工具，尝试了很多，最终他用起来最顺手的还是 WPS 云文档，那就这个了，毕竟工具而已，无所谓的。作为独立开发者，我觉得不要纠结于用什么工具，不要拿公司那套完善的流程来套用，可能并不合适。一定要记住目标，就是把游戏做出来，把构思内容传达明白，至于方式，在开始的阶段，根本不重要。当然，这只是从我个人的体验角度出发，如果意见不同，那就以你为准
游戏从构思，到上线，一共是两个半月的时间，前一个月，基本上没有工程开发相关的东西，也不是没有，只是没有游戏内容上的开发，那时我记得我好像在写热更新，广告调用，等等通用的东西。游戏一开始的构思方向，和现在上线的版本，差别还是挺大的，一开始构思的内容，除了核心的钓鱼这个点，其他的都推翻了。一开始挺慌的，不确定性太大了，策划心里可能也没谱，但还是这样做了，还好，这个方向也没啥大问题。
游戏在5.16号上线了 TapTap，好游快爆。建立了玩家 QQ 群，很快突破了2000人，TapTap 上的评分，也一路上涨，当然，这一切并不是因为游戏，而是我们在 QQ 群里说让大家评论，然后有兑换码奖励。这一点一定不要学，因为 TapTap 是不允许的。因为这个操作，游戏的评分从 4 分，2天内直接冲到了9分以上，并且进了热门榜前5。这也带来了大量的玩家加入QQ 群，为此我还给腾讯贡献了好几百块，用来充年度 VIP 会员，用来扩群。
不过给兑换码让玩家评论的方式，在 TapTap 这里是不允许的。后来，TapTap 就给我们发了警告，不过一开始我没有看到，所以导致了后面大量的评论被删，而且被删的都是一些好评，差评全都留下了，这直接导致了评分的腰斩，回到了6点几分。现在还好，慢慢的恢复正常了，稳定在 7 分左右。至此，游戏的前期平台流量，也基本上宣告结束了，每日下载量巅峰时刻是 1W 多，后来逐步下降，现在完全是自然量了，TapTap 平台每日新增玩家也就几十个，加上其他的平台，现在每日新增在 150 左右。目前累计玩家总量 4.9W 左右，我自己统计的，平台统计的可能会更多一点。每日活跃玩家总数大概是 1800 左右。
玩家 QQ 群人数多了，就会出现很多问题，很多人提各种建议，根本来不及做，只能先汇总下来，慢慢画饼。不过很多饼最终还是做出来了。另外，千万不要跟玩家硬杠，玩家觉得体验不好，自然有不好的道理，作为游戏开发者，要明白目标是什么，是赚钱（为爱开发，或者家里有矿的随便杠），一定要学会认怂。有一些玩家，玩的不爽了，没玩明白，反手就是 TapTap 上一个差评，而 TapTap 上的评评分，好敏感，可能几个差评就直接把分数拉下来了。所以，一定要学会认怂，和玩家硬杠，嘴上可能一时爽了，最终受损失的还是自己。另外，不要随便设置 QQ 管理员，设置了管理员，有一些管理员会觉得有权力了，但是有一些人不会真正站在游戏的角度考虑问题，会和玩家硬怼，因为管理员和游戏没有什么利益上的关系。玩家才不管这个人是不是游戏开发者，反手就是一个差评，受损失的还是游戏开发者。
为什么要以文字的形式来开发游戏呢？为什么不找人合作，将美术做的更好看一点呢？其实我也想啊，要是有一个亿，我也愿意组个团队去折腾，去尝试。可是现实是，对于独立开发者，最重要的还是要先活下去，有稳定的能够支撑基本生活的收入。文字游戏的开发周期，开发难度，是很小的，而文字的表现力，又是无限的。再就是找到合适的人，就很难，其次，风险很高，无法保证做出来一定有收入，还有分成问题，到底程序占多少，策划占多少，美术占多少，平均分配肯定是不合适的，还得根据不同的项目，工作量，来决定，前期分成如果没谈好，哪怕勉强做，可能后期效果，开发效率，也会有所影响。所以，并不是人越多，越好。
游戏从技术上采用了 xlua 热更新的方式开发的，所有的游戏逻辑都是用 lua 来写的，这带来了非常大的好处，我们可以快速的迭代版本，修改 Bug 等等。目前保持的节奏基本上是每天都会更新一点新内容。群里的玩家也养成了每天晚上8点等更新的习惯。如果技术上允许，建议大家使用这种方式，真的迭代很方便，资源上传 CDN 就可以。目前我用的 CDN 是 DogeCloud，新用户的话有免费的存储空间和流量，对于一个小项目来说，完全够用，目前我还没有把免费流量用完，连一半都没用上。
目前游戏的主要收益来自于两方面，一方面是广告，一方面是爱发电的赞助。至于赚了多少钱，从开发时间上来算，肯定没有之前打工时赚的多，不过还好有点收入。
游戏还在继续迭代，玩家的流量，也在缓慢减少，不过应该还能再持续一段时间。下一个项目，也在构思中了，敬请期待。
以上这些都是我从一个独立开发者的角度来谈的，无法和商业公司的开发模式去比较，仅仅是我所经历的一些东西。
技术交流，欢迎添加我的微信：ifloop</p></div><footer class=entry-footer><span title='2022-07-10 11:04:23 +0800 CST'>July 10, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 一个独立游戏的开发总结" href=https://blog.moeif.com/posts/a-indie-game-dev-summary/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>让 Unity Shader 不受 Time.timeScale 的影响</h2></header><div class=entry-content><p>Time.timeScale 是 Unity 的时间缩放变量。如果将此设置为0，那么 Time.time 将停止，并且 Physics 和 Animator 在默认情况下也将停止。所以，将 Time.timeScale 设置为0，通常为了做暂停相关的东西。
但是，有时候希望即使将 TimeScale 设置为 0，有些东西也能继续运行，比如在写 Shader 时，经常会用到 _Time 属性，但是它会受到 Time.timeScale 的影响。不过有以下几种方式可以做到不受影响。
方法一 private void Update() { material.SetFloat("_UnscaledTime", Time.unscaledTime); } 这种方式比较直接，但是也有弊端，如果要设置的 Shader 很多，会增加很多 MonoBehaviour。
方法二 Unity 可以设置 Shader 全局变量，即材质之间共享属性。
private void Update() { Shader.SetGlobalFloat("_UnscaledTime", Time.unscaledTime); } 这样场景中只需要一个做这件事情的 MonoBehaviour 的脚本即可。这个方法可以覆盖大多数情况。
方法三 如果场景中不想放任何脚本，还有一个更强大的方法，那就是使用 PlayerLoop 来独立于 MonoBehaviour 更新全局属性。
首先引入一个工具类 PlayerLoopModifier.cs，代码如下
using System; using System.Collections.Generic; using System.Linq; using UnityEngine.LowLevel; public class PlayerLoopModifier : IDisposable { private PlayerLoopSystem root; public PlayerLoopModifier() { root = PlayerLoop....</p></div><footer class=entry-footer><span title='2022-06-25 11:04:23 +0800 CST'>June 25, 2022</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 让 Unity Shader 不受 Time.timeScale 的影响" href=https://blog.moeif.com/posts/unity-shader-unscaledtime/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Lua 带权重随机</h2></header><div class=entry-content><p>t 是数据数组，weights 是权重数组，两个数组长度是一致的。
function RandomWithWeight(t, weights) local sum = 0 for i = 1, #weights do sum = sum + weights[i] end local compareWeight = math.random(1, sum) local weightIndex = 1 while sum > 0 do sum = sum - weights[weightIndex] if sum &lt; compareWeight then return t[weightIndex], weightIndex end weightIndex = weightIndex + 1 end return nil, nil end</p></div><footer class=entry-footer><span title='2022-06-03 10:04:23 +0800 CST'>June 3, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to Lua 带权重随机" href=https://blog.moeif.com/posts/lua-randon-with-weight/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>理解 Entity Component System</h2></header><div class=entry-content><p>Entity-Component-System (ECS) 是一种架构模式。这种模式广泛地应用在游戏开发中。ECS 使用组合原则，因此这种模式使程序具有更好的灵活性和扩展性。游戏场景中的所有对象都被视为一个实体 (Entity)。这种模式在默认情况下也具有更高的性能。
Entity-Component-System 有三个部分组成
Entity (实体) Component (组件) System (系统) 什么是 Entity Entity 可以理解为一个对象的标识，它没有任何具体的数据和行为，只是标识一个东西。在实现上，通常可以用一个 Struct 来实现。而组件，为其提供数据。
例如，我们要实现一个太空版本 Minecraft，所有游戏中能看到的，有形的东西，都算作一个实体。一搜飞船，一个角色等等。
什么是 Component 组件是附加到实体的可重用模块，它是实体的单一行为描述。组件提供了实体的表现，行为，和功能。不同组件的组合，可以创造出不同类型的逻辑实体。
什么是 System 一个 System 在运行时会遍历很多组件，以此实现高效的性能。例如渲染，物理，寻路。系统为组件提代了全局的管理和服务。
我们可以使用系统来分离逻辑和数据，系统可以用来处理逻辑组件，充当数据容器。
关于系统的例子 处理重力加速度 将速度应用到一个向量上 根据 AI 的设计，来控制机器人的输入 渲染 (位置，Sprite) 处理玩家输入 组合 我们可以组合不同的 Component，以及设置 Component 不同的数据值，来配置具体的实体。
ECS 的优势 降低代码量以及复杂度 对于逻辑扩展拥有很高的灵活性 对于 3D 和 VR 需要大量渲染逻辑的项目有性能优势 让非技术人员更方便地编写脚本 可以分离庞大复杂的类结构 代码可重用和可组合性很强 更加方便的单元测试 可以支撑复杂的 VR 程序 运行时组件的替换 多进程和多线程友好 分离数据和功能 更加灵活地定义游戏对象 提供了解耦，封装，模块化，可重用性方法，以此构成一个干净的设计。 ECS 的劣势 不能像 MVC 那样直观定义逻辑 要用好 ECS，需要更多的思考组件的设计 ECS 需要写大量的小型代码，增加了出错的风险 目前的应用没有面向对象广泛 ECS 示例 看下面的图，这是一个兔子的实体，其中有很多组件被附加到了实体上，Placeable、Huggable、Consumable、Hopping 等 …...</p></div><footer class=entry-footer><span title='2022-04-03 15:23:39 +0800 CST'>April 3, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;猫猫</footer><a class=entry-link aria-label="post link to 理解 Entity Component System" href=https://blog.moeif.com/posts/entity-component-system/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://blog.moeif.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?da9253be08586e454189323668956d43",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7X4M6RGQGH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7X4M6RGQGH")</script></body></html>