<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>搭建自己的AI图片生成器 | 萌一小栈</title><meta name=keywords content="AI"><meta name=description content="最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。
本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。
我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。
1. 确认 Python 环境 首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 python3 --version 可以查看。如果还没有安装 Python3 则使用命令 brew install python3 来安装。如果版本比 3.10 低，则使用 brew upgrade python3 来升级到最新版本
2. 下载 Stable Diffusion 的 Web 工程 使用命令 git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。 注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。
3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。 先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。
点击这里下载 v1-5-pruned.ckpt
下载完成后，将这个文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下"><meta name=author content="fred"><link rel=canonical href=https://blog.moeif.com/posts/create-your-own-ai-image-generator/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.moeif.com/images/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://blog.moeif.com/images/favicon.svg><link rel=icon type=image/png sizes=32x32 href=https://blog.moeif.com/images/favicon.svg><link rel=apple-touch-icon href=https://blog.moeif.com/favicon.svg><link rel=mask-icon href=https://blog.moeif.com/favicon.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="搭建自己的AI图片生成器"><meta property="og:description" content="最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。
本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。
我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。
1. 确认 Python 环境 首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 python3 --version 可以查看。如果还没有安装 Python3 则使用命令 brew install python3 来安装。如果版本比 3.10 低，则使用 brew upgrade python3 来升级到最新版本
2. 下载 Stable Diffusion 的 Web 工程 使用命令 git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。 注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。
3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。 先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。
点击这里下载 v1-5-pruned.ckpt
下载完成后，将这个文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.moeif.com/posts/create-your-own-ai-image-generator/"><meta property="og:image" content="https://blog.moeif.com/coverimages/001.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-03-27T14:41:51+08:00"><meta property="article:modified_time" content="2023-03-27T14:41:51+08:00"><meta property="og:site_name" content="萌一小栈"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.moeif.com/coverimages/001.png"><meta name=twitter:title content="搭建自己的AI图片生成器"><meta name=twitter:description content="最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。
本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。
我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。
1. 确认 Python 环境 首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 python3 --version 可以查看。如果还没有安装 Python3 则使用命令 brew install python3 来安装。如果版本比 3.10 低，则使用 brew upgrade python3 来升级到最新版本
2. 下载 Stable Diffusion 的 Web 工程 使用命令 git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。 注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。
3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。 先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。
点击这里下载 v1-5-pruned.ckpt
下载完成后，将这个文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.moeif.com/posts/"},{"@type":"ListItem","position":2,"name":"搭建自己的AI图片生成器","item":"https://blog.moeif.com/posts/create-your-own-ai-image-generator/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"搭建自己的AI图片生成器","name":"搭建自己的AI图片生成器","description":"最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。\n本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。\n我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。\n1. 确认 Python 环境 首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 python3 --version 可以查看。如果还没有安装 Python3 则使用命令 brew install python3 来安装。如果版本比 3.10 低，则使用 brew upgrade python3 来升级到最新版本\n2. 下载 Stable Diffusion 的 Web 工程 使用命令 git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。 注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。\n3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。 先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。\n点击这里下载 v1-5-pruned.ckpt\n下载完成后，将这个文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下","keywords":["AI"],"articleBody":"最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。\n本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。\n我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。\n1. 确认 Python 环境 首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 python3 --version 可以查看。如果还没有安装 Python3 则使用命令 brew install python3 来安装。如果版本比 3.10 低，则使用 brew upgrade python3 来升级到最新版本\n2. 下载 Stable Diffusion 的 Web 工程 使用命令 git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。 注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。\n3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。 先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。\n点击这里下载 v1-5-pruned.ckpt\n下载完成后，将这个文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下\n4. 运行 Stable Diffusion 工程下载来下后，使用命令 cd stable-diffusion-webui 进入工程的主目录。然后再执行运行命令 ./webui.sh。注意，这个命令也是可能会非常的慢，或者失败，因为第一次运行，会下载一些其他的库，这个过程可能会失败很多次，取决于网络情况，我安装的时候，就装了好久。失败了就重新运行 ./webui.sh 即可，已经下载完的不会重复下载，放心好了。\n命令运行可能需要一小会，不要着急，当看到终端输出下面的内容时，一般就说明行了\n在浏览器中打开 http://localhost:7860/ 即可看到运行后的 Stable Diffusion Web 界面了。\n5. 尝试生成一张图 在 web 界面中的第一个输入框中输入下面的 Prompt，也就是告诉 Stable Diffusion 要生成什么的关键词描述\noil painting with heavy impasto of a pirate ship and its captain, cosmic horror painting, elegant intricate artstation concept art by craig mullins detailed\n其他的都不变，然后点击右边的 Generate 按钮，等待一会，右下角就会出现结果\n看起来效果还行对不对。这只是最基本的用法，上面第一个框是输入关键词的，下面一个框是输入负面关键词（就是不想要的）的，如果你要问这些关键词从哪里来，嗯，很多网站都有，我一般是从下面几个网站去找想要的图的风格的 Prompt\nhttps://arthub.ai/\nhttps://prompthero.com/\n6. 说一下模型 接下来说一下模型，上面我们用到的只是官方的最基本的模型，还有很多大神做的模型，比如用来生成好看小姐姐的，那么模型从哪里来呢？我一般从 https://civitai.com/ 这个网站来下载。\n我理解的模型分为两种，一种可以理解成主模型，一种是依附于主模型才能使用的模型，例如比较流行的Lora模型，就是需要依附于主模型才能使用。我们先说主模型，主模型一般的大小都是好几个G，而像Lora这种需要依赖于主模型的模型，一般都是几百M。\n主模型下载后，需要放在 stable-diffusion-webui/models/Stable-diffusion 目录下。 而像Lora模型，则需要放在 stable-diffusion-webui/models/Lora 目录下。\n7. 下载一个非官方的模型试一下 我们在 civitai 这个网站上下载一个模型，例如这个 国风3 GuoFeng3。打开后，点击右边的 **Download Latest (5.19GB)，即可下载。如果有一些模型需要登录才能下载，那就按网站的要求来。下载完后，把这个模型的文件放入 stable-diffusion-webui/models/Stable-diffusion 目录下。然后重新运行 ./webui.sh 命令（先把之前运行的中止掉），这才 Stable Diffusion 才能加载我们新下载的模型。\n重新运行后，打开 Web 界面，然后左上角 Stable Diffusion checkpoint 那里，选择刚下载的那个 GuoFeng3。然后在 Prompt 和负面 Prompt 中分别输入下面的关键词。\nPrompt\nbest quality, masterpiece, highres, 1girl,china dress,Beautiful face,upon_body, photorealistic, (high detailed skin:1.2), 8k uhd, dslr, soft lighting, high quality, volumetric lighting, candid, Photograph, high resolution, 4k, 8k, Bokeh\nNegative prompt\n(((simple background))),monochrome ,lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, lowres, bad anatomy, bad hands, text, error, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, ugly,pregnant,vore,duplicate,morbid,mut ilated,tran nsexual, hermaphrodite,long neck,mutated hands,poorly drawn hands,poorly drawn face,mutation,deformed,blurry,bad anatomy,bad proportions,malformed limbs,extra limbs,cloned face,disfigured,gross proportions, (((missing arms))),(((missing legs))), (((extra arms))),(((extra legs))),pubic hair, plump,bad legs,error legs,username,blurry,bad feet\nCFG scale 设置为 7 Steps 设置为 30 Sampler 设置为 Euler a Seed 设置为 1032908249\n然后点击 Generate 结果如下\n8. 试一下 Lora 模型 首先，我们去下载一个 Lora 模型，例如这个 Fashion Girl。点击右边的下载，下载后放在 stable-diffusion-webui/models/Lora 目录下。然后重启 Stable Diffusion，也就是重新运行命令 ./webui.sh。\nLora 模型不会出现在 Stable Diffusion checkpoint 那个选择框里，它是一个 Prompt 参数，告诉生成器要使用的 Lora 模型以及权重。\n主模型我们还是使用上面的那个国风3模型，然后在此基础上，用上 Lora 模型。\n首先输入之前的 Prompt，然后根据下图中的箭头，依次点击红框中的内容，即可看到在上面 Prompt 输入框中，多了一个指令 ，这个就是告诉 Stable Diffusion 使用 Lora 模型，并且权重是1，我可以调整为其他的值，例如 0.8。\n然后点击右边的 Generate，生成结果如下。\n以上就是在本地搭建 Stable Diffusion 生成器的全过程，我猜接下来你肯定是要去模型网站下载各种模型尝试了，加油。\n对于文中提到的一些网站，不排除有的可能需要科学上网，此问题不在本文讨论范围内。\n","wordCount":"342","inLanguage":"en","image":"https://blog.moeif.com/coverimages/001.png","datePublished":"2023-03-27T14:41:51+08:00","dateModified":"2023-03-27T14:41:51+08:00","author":{"@type":"Person","name":"fred"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.moeif.com/posts/create-your-own-ai-image-generator/"},"publisher":{"@type":"Organization","name":"萌一小栈","logo":{"@type":"ImageObject","url":"https://blog.moeif.com/images/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.moeif.com/ accesskey=h title="Moeif (Alt + H)"><img src=https://blog.moeif.com/images/favicon.svg alt aria-label=logo height=35>Moeif</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.moeif.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://blog.moeif.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://blog.moeif.com/about/ title=About><span>About</span></a></li><li><a href=https://moeif.com title="Moeif Games"><span>Moeif Games</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://blog.moeif.com/>Home</a>&nbsp;»&nbsp;<a href=https://blog.moeif.com/posts/>Posts</a></div><h1 class=post-title>搭建自己的AI图片生成器</h1><div class=post-meta><span title='2023-03-27 14:41:51 +0800 CST'>March 27, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;fred</div></header><figure class=entry-cover><img loading=lazy src=https://blog.moeif.com/coverimages/001.png alt><p></p></figure><div class=post-content><p>最近一段时间，使用 Stable Diffusion 等工具生成图片的资讯充斥着整个互联网，但是很多在线的 AI 图片生成工具，要么根本访问不了（需要科学上网），要么就是需要付费，而且还巨慢。作为一个常年混迹于互联网的技术流玩家，我觉得有必要在自己本机搭一下无限制的 AI 图片生成工具。</p><p>本地搭建这东西我觉得还是很有用的，对于我来说，写博客，公众号的一些配图，完全可以用这东西生成。还有最重要的，我是想用在独立游戏开发中，让我做的那些垃圾文字游戏，可以多一点图片，增加哪怕一点点美感和吸引力。</p><p>我们用的工具是 Stable Diffusion。由于我的机器是 Mac M1 芯片的，所以教程也就是在此配置上去搭建，其他平台类似。</p><h3 id=1-确认-python-环境>1. 确认 Python 环境<a hidden class=anchor aria-hidden=true href=#1-确认-python-环境>#</a></h3><p>首先确保自己机器上的 Python3 版本是 3.10 以上，使用命令 <code>python3 --version</code> 可以查看。如果还没有安装 Python3 则使用命令 <code>brew install python3</code> 来安装。如果版本比 3.10 低，则使用 <code>brew upgrade python3</code> 来升级到最新版本</p><h3 id=2-下载-stable-diffusion-的-web-工程>2. 下载 Stable Diffusion 的 Web 工程<a hidden class=anchor aria-hidden=true href=#2-下载-stable-diffusion-的-web-工程>#</a></h3><p>使用命令 <code>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui</code> 来克隆 Stable Diffusion 的 web 工程，这个工程可以让我们在浏览器中使用 Stable Diffusion。
注意，这个过程可能会异常的慢，甚至可以失败，如果失败了，那就重新执行命令，或者采取一些科学的网络方式对其进行下速，反正相办法下载下来就行。</p><h3 id=3-下载模型文件模型文件可以理解为官方或其他人已经训练好的一些参数集合有了这个生成工具才知道怎么去生成一张图片>3. 下载模型文件，模型文件，可以理解为官方或其他人已经训练好的一些参数集合，有了这个，生成工具才知道怎么去生成一张图片。<a hidden class=anchor aria-hidden=true href=#3-下载模型文件模型文件可以理解为官方或其他人已经训练好的一些参数集合有了这个生成工具才知道怎么去生成一张图片>#</a></h3><p>先下载官方的基础 Model，这里使用的是 1.5 版本的，2.0 版本的不在此博客的讨论范围内，因为我也没用过。</p><p>点击这里下载 <a href="https://cdn-lfs.huggingface.co/repos/6b/20/6b201da5f0f5c60524535ebb7deac2eef68605655d3bbacfee9cce0087f3b3f5/e1441589a6f3c5a53f5f54d0975a18a7feb7cdf0b0dee276dfc3331ae376a053?response-content-disposition=attachment%3B+filename*%3DUTF-8%27%27v1-5-pruned.ckpt%3B+filename%3D%22v1-5-pruned.ckpt%22%3B&Expires=1680158334&Policy=eyJTdGF0ZW1lbnQiOlt7IlJlc291cmNlIjoiaHR0cHM6Ly9jZG4tbGZzLmh1Z2dpbmdmYWNlLmNvL3JlcG9zLzZiLzIwLzZiMjAxZGE1ZjBmNWM2MDUyNDUzNWViYjdkZWFjMmVlZjY4NjA1NjU1ZDNiYmFjZmVlOWNjZTAwODdmM2IzZjUvZTE0NDE1ODlhNmYzYzVhNTNmNWY1NGQwOTc1YTE4YTdmZWI3Y2RmMGIwZGVlMjc2ZGZjMzMzMWFlMzc2YTA1Mz9yZXNwb25zZS1jb250ZW50LWRpc3Bvc2l0aW9uPSoiLCJDb25kaXRpb24iOnsiRGF0ZUxlc3NUaGFuIjp7IkFXUzpFcG9jaFRpbWUiOjE2ODAxNTgzMzR9fX1dfQ__&Signature=VxNVuW0cImdmUrkDol35H8OxqJs7isbJAE%7EOygjrTQEuvjp7ijj87-VZ7peCZSYtoB5NEdwkfj2bO30P0CNozHN7wPXQbx7Q7PxvXzWo086HJslbKD1L6ArTVCgupJf7AH2uD%7EGnVQXIM-viUV8EzGUnjo08Cq2EL5wn-3Zph4R0nEAtuF64ehCvQmQgzKLk927asBf391MgvilIbdZj4-7BzXDTGV-y160XeqllcwSjQAIuKhxBICQskz6tUVkfCusw3p0XceCm1HL1Z-wyyN4nkmn8ihFZeQJspBIKUBIouEQHuHT2sk35EQhbonM4ePGxIl7Ek0Pl5PwxbA1sZA__&Key-Pair-Id=KVTP0A1DKRTAX">v1-5-pruned.ckpt</a></p><p>下载完成后，将这个文件放入 <code>stable-diffusion-webui/models/Stable-diffusion</code> 目录下</p><h3 id=4-运行-stable-diffusion>4. 运行 Stable Diffusion<a hidden class=anchor aria-hidden=true href=#4-运行-stable-diffusion>#</a></h3><p>工程下载来下后，使用命令 <code>cd stable-diffusion-webui</code> 进入工程的主目录。然后再执行运行命令 <code>./webui.sh</code>。注意，这个命令也是可能会非常的慢，或者失败，因为第一次运行，会下载一些其他的库，这个过程可能会失败很多次，取决于网络情况，我安装的时候，就装了好久。失败了就重新运行 <code>./webui.sh</code> 即可，已经下载完的不会重复下载，放心好了。</p><p>命令运行可能需要一小会，不要着急，当看到终端输出下面的内容时，一般就说明行了</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/1.png alt></p><p>在浏览器中打开 <code>http://localhost:7860/</code> 即可看到运行后的 Stable Diffusion Web 界面了。</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/2.png alt></p><h3 id=5-尝试生成一张图>5. 尝试生成一张图<a hidden class=anchor aria-hidden=true href=#5-尝试生成一张图>#</a></h3><p>在 web 界面中的第一个输入框中输入下面的 Prompt，也就是告诉 Stable Diffusion 要生成什么的关键词描述</p><p><code>oil painting with heavy impasto of a pirate ship and its captain, cosmic horror painting, elegant intricate artstation concept art by craig mullins detailed</code></p><p>其他的都不变，然后点击右边的 <strong>Generate</strong> 按钮，等待一会，右下角就会出现结果</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/3.png alt></p><p>看起来效果还行对不对。这只是最基本的用法，上面第一个框是输入关键词的，下面一个框是输入负面关键词（就是不想要的）的，如果你要问这些关键词从哪里来，嗯，很多网站都有，我一般是从下面几个网站去找想要的图的风格的 Prompt</p><p><a href=https://arthub.ai/>https://arthub.ai/</a></p><p><a href=https://prompthero.com/>https://prompthero.com/</a></p><h3 id=6-说一下模型>6. 说一下模型<a hidden class=anchor aria-hidden=true href=#6-说一下模型>#</a></h3><p>接下来说一下模型，上面我们用到的只是官方的最基本的模型，还有很多大神做的模型，比如用来生成好看小姐姐的，那么模型从哪里来呢？我一般从 <a href=https://civitai.com/>https://civitai.com/</a> 这个网站来下载。</p><p>我理解的模型分为两种，一种可以理解成主模型，一种是依附于主模型才能使用的模型，例如比较流行的Lora模型，就是需要依附于主模型才能使用。我们先说主模型，主模型一般的大小都是好几个G，而像Lora这种需要依赖于主模型的模型，一般都是几百M。</p><p>主模型下载后，需要放在 <code>stable-diffusion-webui/models/Stable-diffusion</code> 目录下。
而像Lora模型，则需要放在 <code>stable-diffusion-webui/models/Lora</code> 目录下。</p><h3 id=7-下载一个非官方的模型试一下>7. 下载一个非官方的模型试一下<a hidden class=anchor aria-hidden=true href=#7-下载一个非官方的模型试一下>#</a></h3><p>我们在 civitai 这个网站上下载一个模型，例如这个 <a href=https://civitai.com/models/10415/3-guofeng3>国风3 GuoFeng3</a>。打开后，点击右边的 **Download Latest (5.19GB)，即可下载。如果有一些模型需要登录才能下载，那就按网站的要求来。下载完后，把这个模型的文件放入 <code>stable-diffusion-webui/models/Stable-diffusion</code> 目录下。然后重新运行 <code>./webui.sh</code> 命令（先把之前运行的中止掉），这才 Stable Diffusion 才能加载我们新下载的模型。</p><p>重新运行后，打开 Web 界面，然后左上角 Stable Diffusion checkpoint 那里，选择刚下载的那个 GuoFeng3。然后在 Prompt 和负面 Prompt 中分别输入下面的关键词。</p><p>Prompt</p><p><code>best quality, masterpiece, highres, 1girl,china dress,Beautiful face,upon_body, photorealistic, (high detailed skin:1.2), 8k uhd, dslr, soft lighting, high quality, volumetric lighting, candid, Photograph, high resolution, 4k, 8k, Bokeh</code></p><p>Negative prompt</p><p><code>(((simple background))),monochrome ,lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, lowres, bad anatomy, bad hands, text, error, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, ugly,pregnant,vore,duplicate,morbid,mut ilated,tran nsexual, hermaphrodite,long neck,mutated hands,poorly drawn hands,poorly drawn face,mutation,deformed,blurry,bad anatomy,bad proportions,malformed limbs,extra limbs,cloned face,disfigured,gross proportions, (((missing arms))),(((missing legs))), (((extra arms))),(((extra legs))),pubic hair, plump,bad legs,error legs,username,blurry,bad feet</code></p><p>CFG scale 设置为 7
Steps 设置为 30
Sampler 设置为 Euler a
Seed 设置为 1032908249</p><p>然后点击 <strong>Generate</strong> 结果如下</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/4.png alt></p><h3 id=8-试一下-lora-模型>8. 试一下 Lora 模型<a hidden class=anchor aria-hidden=true href=#8-试一下-lora-模型>#</a></h3><p>首先，我们去下载一个 Lora 模型，例如这个 <a href=https://civitai.com/models/8217/fashion-girl>Fashion Girl</a>。点击右边的下载，下载后放在 <code>stable-diffusion-webui/models/Lora</code> 目录下。然后重启 Stable Diffusion，也就是重新运行命令 <code>./webui.sh</code>。</p><p>Lora 模型不会出现在 Stable Diffusion checkpoint 那个选择框里，它是一个 Prompt 参数，告诉生成器要使用的 Lora 模型以及权重。</p><p>主模型我们还是使用上面的那个国风3模型，然后在此基础上，用上 Lora 模型。</p><p>首先输入之前的 Prompt，然后根据下图中的箭头，依次点击红框中的内容，即可看到在上面 Prompt 输入框中，多了一个指令 <code>&lt;lora:fashionGirl_v50:1></code>，这个就是告诉 Stable Diffusion 使用 Lora 模型，并且权重是1，我可以调整为其他的值，例如 0.8。</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/5.png alt></p><p>然后点击右边的 <strong>Generate</strong>，生成结果如下。</p><p><img loading=lazy src=/postimages/create-your-own-ai-generator/6.png alt></p><p>以上就是在本地搭建 Stable Diffusion 生成器的全过程，我猜接下来你肯定是要去模型网站下载各种模型尝试了，加油。</p><blockquote><p>对于文中提到的一些网站，不排除有的可能需要科学上网，此问题不在本文讨论范围内。</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://blog.moeif.com/tags/ai/>AI</a></li></ul><nav class=paginav><a class=prev href=https://blog.moeif.com/posts/about-chatgpt/><span class=title>« Prev</span><br><span>关于 ChatGPT、GPT、GPT-3、OpenAI</span></a>
<a class=next href=https://blog.moeif.com/posts/rpg-game-design-note/><span class=title>Next »</span><br><span>角色扮演游戏设计艺术笔记</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on twitter" href="https://twitter.com/intent/tweet/?text=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8&url=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f&hashtags=AI"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8&summary=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8&source=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f&title=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on whatsapp" href="https://api.whatsapp.com/send?text=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8%20-%20https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 搭建自己的AI图片生成器 on telegram" href="https://telegram.me/share/url?text=%e6%90%ad%e5%bb%ba%e8%87%aa%e5%b7%b1%e7%9a%84AI%e5%9b%be%e7%89%87%e7%94%9f%e6%88%90%e5%99%a8&url=https%3a%2f%2fblog.moeif.com%2fposts%2fcreate-your-own-ai-image-generator%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?da9253be08586e454189323668956d43",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7X4M6RGQGH"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-7X4M6RGQGH")</script></body></html>